(this["webpackJsonpfirebase-chat-app"]=this["webpackJsonpfirebase-chat-app"]||[]).push([[0],{66:function(e,t,a){},67:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return D}));var c=a(2),n=a.n(c),s=a(32),r=a.n(s),o=(a(66),a(67),a(31)),i=a(15),j=a(45),l=a.n(j),d=a(53),u=a(24),b=a(100),h=a(27),m=a(28),O=a(5),p=n.a.memo((function(){var e=Object(c.useContext)(D).auth,t=Object(m.a)(e);if(Object(u.a)(t,1)[0])return Object(O.jsx)(i.a,{to:"/chat"});var a=function(){var t=Object(d.a)(l.a.mark((function t(){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new h.a.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(a);case 3:c=t.sent,c.user;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"login",children:Object(O.jsx)(b.a,{onClick:a,variant:"contained",color:"primary",className:"login__button",children:"Log-in with google"})})})),x=a(104),f=a(103),g=a(101),v=a(105),_=a(99),N=a(58),C=a(98),y=n.a.memo((function(){return Object(O.jsx)("div",{className:"progress",children:Object(O.jsx)(C.a,{size:100})})})),I=function(e){var t=e.messageUID,a=e.userUID,c=e.photoURL,n=e.text,s=e.displayName;return Object(O.jsxs)("div",{className:"message chat__message ".concat(t===a?"chat__message_from-me":""),children:[Object(O.jsx)("img",{src:c,alt:"",className:"message__user-photo"}),Object(O.jsxs)("div",{className:"message__body",children:[Object(O.jsx)("p",{className:"message__username",children:s}),Object(O.jsx)("p",{className:"message__text",children:n})]})]})},F=n.a.memo((function(){var e=Object(c.useContext)(D),t=e.auth,a=e.firestore,n=Object(m.a)(t),s=Object(u.a)(n,1)[0],r=Object(c.useState)(""),o=Object(u.a)(r,2),j=o[0],l=o[1],d=Object(N.a)(a.collection("messages").orderBy("createdAt")),p=Object(u.a)(d,2),C=p[0],F=p[1],U=Object(c.useRef)(null);Object(c.useEffect)((function(){var e;null===(e=U.current)||void 0===e||e.scrollTo({behavior:"smooth",top:U.current.scrollHeight})}),[C]);return s?F?Object(O.jsx)(y,{}):Object(O.jsxs)("section",{className:"chat",children:[Object(O.jsxs)("div",{ref:U,className:"chat__messages",children:[C.map((function(e,t){return Object(O.jsx)(I,{displayName:e.displayName,userUID:s.uid,messageUID:e.uid,text:e.text,photoURL:e.photoURL},t)})),Object(O.jsx)("span",{className:"scrollTo"})]}),Object(O.jsx)("div",{className:"chat__controls",children:Object(O.jsxs)(x.a,{variant:"outlined",fullWidth:!0,children:[Object(O.jsx)(f.a,{htmlFor:"outlined-adornment-message",children:"Message"}),Object(O.jsx)(g.a,{onChange:function(e){return l(e.target.value)},value:j,fullWidth:!0,id:"outlined-adornment-message",endAdornment:Object(O.jsx)(v.a,{position:"end",children:Object(O.jsx)(b.a,{onClick:function(){a.collection("messages").add({uid:s.uid,displayName:s.displayName,photoURL:s.photoURL,text:j,createdAt:h.a.firestore.FieldValue.serverTimestamp()}),l("")},variant:"contained",color:"primary",endIcon:Object(O.jsx)(_.a,{children:"send"}),children:"Send"})}),labelWidth:70})]})})]}):Object(O.jsx)(i.a,{to:"/login"})})),U=a(102),k=n.a.memo((function(e){var t=Object(c.useContext)(D).auth,a=Object(m.a)(t),n=Object(u.a)(a,1)[0];return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("header",{children:Object(O.jsx)("nav",{className:"navbar",children:n?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(U.a,{className:"user-avatar",src:n.photoURL}),Object(O.jsx)(b.a,{onClick:function(){return t.signOut()},className:"navbar__link",variant:"contained",color:"secondary",children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(O.jsx)(b.a,{className:"navbar__link",variant:"contained",color:"secondary",component:o.b,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})})})})),L=n.a.memo((function(e){var t=Object(c.useContext)(D).auth,a=Object(m.a)(t),n=Object(u.a)(a,3),s=(n[0],n[1]);n[2];return s?Object(O.jsx)(y,{}):Object(O.jsx)(O.Fragment,{children:e.children})}));var w=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(o.a,{children:Object(O.jsxs)(L,{children:[Object(O.jsx)(k,{}),Object(O.jsx)("main",{children:Object(O.jsxs)(i.d,{children:[Object(O.jsx)(i.b,{exact:!0,path:"/login",component:p}),Object(O.jsx)(i.b,{exact:!0,path:"/chat",component:F})]})})]})})})},A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,107)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};a(78),a(79);h.a.initializeApp({apiKey:"AIzaSyCDoeY_OPEmje0hYhb_9yNbTbNFB882Yhc",authDomain:"chat-app-7804e.firebaseapp.com",projectId:"chat-app-7804e",storageBucket:"chat-app-7804e.appspot.com",messagingSenderId:"312475671256",appId:"1:312475671256:web:216fd867818b69ef8fd5ad",measurementId:"G-0121KC8CJC"});var D=Object(c.createContext)(null),R=h.a.auth(),P=h.a.firestore();r.a.render(Object(O.jsx)(D.Provider,{value:{firebase:h.a,auth:R,firestore:P},children:Object(O.jsx)(w,{})}),document.getElementById("root")),A()}},[[80,1,2]]]);
//# sourceMappingURL=main.ff54a792.chunk.js.map